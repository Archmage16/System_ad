{% extends "base.html" %}
{% block title %}–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö{% endblock %}

{% block content %}
<center><h2 class="mb-4">üìö –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º—ã</h2></center>


<!-- Office -->
<h4 class="mt-4">üè¢ –û—Ñ–∏—Å—ã</h4>
<div class="">
    <div class="row">
        {% for office in Office%}
        <div class="col-md-4">
            <div class="card shadow-sm mb-3">
                <div class="card-body">
                    <h5 class="card-title">{{ office.name }}</h5>
                    <p class="card-text">{{ office.address }}</p>
                    <small class="text-muted">–°–æ–∑–¥–∞–Ω–æ: {{ office.created_at|date:"d.m.Y H:i" }}</small>
                </div>
            </div>
        </div>
        {% empty %}
        <p class="text-muted">–ù–µ—Ç –æ—Ñ–∏—Å–æ–≤</p>
        {% endfor %}
    </div>
    <a href="{% url 'office-create'%}">Create new Office</a>
</div>

<!-- Rooms -->
<h4 class="mt-4">üö™ –ö–æ–º–Ω–∞—Ç—ã</h4>
<div class="">
    <div class="row">
        {% for room in Room %}
        <div class="col-md-4">
            <div class="card shadow-sm mb-3">
                <div class="card-body">
                    <h5 class="card-title">{{ room.office.name }} - {{ room.room_number }}</h5>
                    <p class="card-text">–ú–∞–∫—Å. –º–µ—Å—Ç: {{ room.max_places }}</p>
                    <small class="text-muted">–°–æ–∑–¥–∞–Ω–æ: {{ room.created_at|date:"d.m.Y H:i" }}</small>
                </div>
            </div>
        </div>
        {% empty %}
        <p class="text-muted">–ù–µ—Ç –∫–æ–º–Ω–∞—Ç</p>
        {% endfor %}
    </div>
    <a href="{% url 'room-create'%}">Create new Room</a>

</div>


<!-- Computers -->
<h4 class="mt-4">üíª –ö–æ–º–ø—å—é—Ç–µ—Ä—ã</h4>
<div class="table-responsive shadow-sm rounded mb-4">
<table class="table table-hover table-bordered align-middle bg-white">
    <thead class="table-dark text-center">
        <tr>
            <th>ID</th>
            <th>–•–æ—Å—Ç</th>
            <th>IP</th>
            <th>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
            <th>–ö–æ–º–Ω–∞—Ç–∞</th>
            <th>–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è</th>
        </tr>
    </thead>
    <tbody>
        {% for computer in data %}
        <tr>
            <td class="text-center">{{ computer.id }}</td>
            <td>{{ computer.hostname }}</td>
            <td>{{ computer.ip_address }}</td>
            <td>{{ computer.user_fullname }}</td>
            <td>{{ computer.room.room_number}}</td>
            <td class="text-center">{{ computer.created_at|date:"d.m.Y H:i" }}</td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="6" class="text-center text-muted">–ù–µ—Ç –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–≤</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
<center><a href="{% url 'computer-create'%}">Create new Computer</a></center>
</div>

<!-- Incidents -->
<h4 class="mt-4">‚ö†Ô∏è –ò–Ω—Ü–∏–¥–µ–Ω—Ç—ã</h4>
<div class="table-responsive shadow-sm rounded">
<table class="table table-hover table-bordered align-middle bg-white">
    <thead class="table-dark text-center">
        <tr>
            <th>ID</th>
            <th>–ö–æ–º–ø—å—é—Ç–µ—Ä</th>
            <th>–ö–æ–º–Ω–∞—Ç–∞</th>
            <th>–°–æ–æ–±—â–µ–Ω–∏–µ</th>
            <th>–°—Ç–∞—Ç—É—Å</th>
            <th>–°–æ–∑–¥–∞–Ω–æ</th>
            <th>–ó–∞–∫—Ä—ã—Ç–æ</th>
        </tr>
    </thead>
    <tbody>
        {% for incident in Incident%}
        <tr>
            <td class="text-center">{{ incident.id }}</td>
            <td>{{ incident.computer.hostname}}</td>
            <td>{{ incident.room.room_number}}</td>
            <td>{{ incident.user_message|truncatechars:50 }}</td>
            <td>{{ incident.get_status_display }}</td>
            <td class="text-center">{{ incident.created_at|date:"d.m.Y H:i" }}</td>
            <td class="text-center">{{ incident.closed_at|date:"d.m.Y H:i" }}</td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="7" class="text-center text-muted">–ù–µ—Ç –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤</td>
        </tr>
        {% endfor %}
        
    </tbody>
</table>
</div>

{% endblock %}
